{% extends "base.html" %}

{% block title %}Accounts - CBS{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Account Management</h1>
    <button class="btn btn-primary" onclick="toggleForm('accountForm')">+ Create Account</button>
</div>

<div id="accountForm" class="form-box" style="display: none;">
    <h2>Create New Account</h2>
    <form method="POST" action="/account/add">
        <div class="form-row">
            <div class="form-group">
                <label>Customer</label>
                <select name="customer_id" required>
                    <option value="">Select Customer</option>
                    {% for customer in customers %}
                    <option value="{{ customer.CustomerID }}">{{ customer.Name }} ({{ customer.CustomerID }})</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label>Account Type</label>
                <select name="type" required>
                    <option value="Savings">Savings</option>
                    <option value="Current">Current</option>
                    <option value="Fixed">Fixed Deposit</option>
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" required placeholder="customer@email.com">
            </div>
            
            <div class="form-group">
                <label>Initial Balance</label>
                <input type="number" name="balance" required placeholder="0.00" step="0.01" min="0">
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Create Account</button>
            <button type="button" class="btn btn-secondary" onclick="toggleForm('accountForm')">Cancel</button>
        </div>
    </form>
</div>

<div class="content-box">
    <h2>All Accounts</h2>
    <div class="table-responsive">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Account No</th>
                    <th>Customer</th>
                    <th>Email</th>
                    <th>Type</th>
                    <th>Balance</th>
                </tr>
            </thead>
            <tbody>
                {% for account in accounts %}
                <tr>
                    <td>{{ account.AccountNo }}</td>
                    <td>{{ account.customer.Name }}</td>
                    <td>{{ account.Email }}</td>
                    <td><span class="badge badge-{{ account.Type.lower() }}">{{ account.Type }}</span></td>
                    <td class="amount">PKR {{ "%.2f"|format(account.Balance) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
