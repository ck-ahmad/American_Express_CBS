<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions - Premium Banking</title>
    <meta name="description" content="Process and manage banking transactions">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <div class="logo-icon">
                    <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"></path></svg>
                </div>
                <div class="logo-text">
                    <h1>Premium Banking</h1>
                    <p>Account Management System</p>
                </div>
            </a>
            
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg><span>Dashboard</span></a></li>
                <li><a href="customers.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><span>Customers</span></a></li>
                <li><a href="accounts.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg><span>Accounts</span></a></li>
                <li><a href="transactions.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path></svg><span>Transactions</span></a></li>
                <li><a href="logs.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg><span>Activity Logs</span></a></li>
            </ul>
        </div>
    </header>

    <main class="container">
        <div class="page-header">
            <h1>Transaction Management</h1>
            <p>Process deposits, withdrawals, and transfers</p>
        </div>

        <div class="grid grid-3">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon primary">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                    </div>
                    <div class="card-title">
                        <h2>New Transaction</h2>
                        <p>Process a transaction</p>
                    </div>
                </div>

                <form id="transactionForm">
                    <div class="form-group">
                        <label class="form-label">Account Number</label>
                        <input type="text" class="form-input" id="accountNo" required placeholder="ACC12345678">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Transaction Type</label>
                        <select class="form-select" id="type" required>
                            <option value="Deposit">Deposit</option>
                            <option value="Withdrawal">Withdrawal</option>
                            <option value="Transfer">Transfer</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Amount (PKR)</label>
                        <input type="number" class="form-input" id="amount" required placeholder="0.00" step="0.01">
                    </div>

                    <button type="submit" class="btn btn-primary btn-block btn-lg">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                        </svg>
                        Process Transaction
                    </button>
                </form>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon accent">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                        </svg>
                    </div>
                    <div class="card-title">
                        <h2>Transaction History</h2>
                        <p><span id="transactionCount">0</span> total transactions</p>
                    </div>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Transaction ID</th>
                                <th>Account</th>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Date & Time</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTable"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        const loadTransactions = () => {
            const transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
            const tbody = document.getElementById('transactionsTable');
            document.getElementById('transactionCount').textContent = transactions.length;

            if (transactions.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="empty-state">No transactions yet. Process your first transaction above.</td></tr>';
                return;
            }

            tbody.innerHTML = transactions.map(txn => {
                const icon = txn.type === 'Deposit' 
                    ? '<svg class="text-green" style="width: 20px; height: 20px;" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>'
                    : txn.type === 'Withdrawal'
                    ? '<svg class="text-red" style="width: 20px; height: 20px;" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>'
                    : '<svg class="text-blue" style="width: 20px; height: 20px;" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path></svg>';
                
                const colorClass = txn.type === 'Deposit' ? 'text-green' : txn.type === 'Withdrawal' ? 'text-red' : 'text-blue';

                return `
                    <tr>
                        <td class="font-mono font-semibold">${txn.id}</td>
                        <td class="text-muted">${txn.accountNo}</td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                ${icon}
                                <span class="${colorClass} font-semibold">${txn.type}</span>
                            </div>
                        </td>
                        <td class="font-semibold">${formatCurrency(txn.amount)}</td>
                        <td class="text-muted">
                            <div>
                                <p>${txn.date}</p>
                                <p style="font-size: 0.75rem;">${txn.time}</p>
                            </div>
                        </td>
                        <td><span class="badge badge-success">${txn.status}</span></td>
                    </tr>
                `;
            }).join('');
        };

        document.getElementById('transactionForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
            const now = new Date();
            const type = document.getElementById('type').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const accountNo = document.getElementById('accountNo').value;

            const newTransaction = {
                id: `TXN${(transactions.length + 1).toString().padStart(3, '0')}`,
                accountNo: accountNo,
                type: type,
                amount: amount,
                date: now.toISOString().split('T')[0],
                time: now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }),
                status: "Completed"
            };

            transactions.unshift(newTransaction);
            localStorage.setItem('transactions', JSON.stringify(transactions));
            
            addLog('Transaction Processed', `${type} of ${formatCurrency(amount)} to ${accountNo}`, 'success');
            showToast(`${type} transaction completed successfully!`);
            
            e.target.reset();
            loadTransactions();
        });

        document.addEventListener('DOMContentLoaded', loadTransactions);
    </script>
</body>
</html>
