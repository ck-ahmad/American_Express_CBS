<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Management - Premium Banking</title>
    <meta name="description" content="Create and manage banking accounts">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <div class="logo-icon">
                    <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"></path></svg>
                </div>
                <div class="logo-text">
                    <h1>Premium Banking</h1>
                    <p>Account Management System</p>
                </div>
            </a>
            
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg><span>Dashboard</span></a></li>
                <li><a href="customers.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><span>Customers</span></a></li>
                <li><a href="accounts.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg><span>Accounts</span></a></li>
                <li><a href="transactions.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path></svg><span>Transactions</span></a></li>
                <li><a href="logs.html" class="nav-link"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg><span>Activity Logs</span></a></li>
            </ul>
        </div>
    </header>

    <main class="container">
        <div class="page-header">
            <h1>Account Management</h1>
            <p>Create and manage banking accounts</p>
        </div>

        <div class="grid grid-3">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon primary">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                    </div>
                    <div class="card-title">
                        <h2>Create New Account</h2>
                        <p>Open a new banking account</p>
                    </div>
                </div>

                <form id="accountForm">
                    <div class="form-group">
                        <label class="form-label">Customer ID</label>
                        <input type="text" class="form-input" id="customerId" required placeholder="CUST001">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Account Type</label>
                        <select class="form-select" id="type" required>
                            <option value="Savings">Savings Account</option>
                            <option value="Current">Current Account</option>
                            <option value="Fixed">Fixed Deposit</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Initial Balance (PKR)</label>
                        <input type="number" class="form-input" id="balance" required placeholder="0.00" step="0.01">
                    </div>

                    <button type="submit" class="btn btn-primary btn-block btn-lg">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Create Account
                    </button>
                </form>
            </div>

            <div style="display: flex; flex-direction: column; gap: 2rem;">
                <div>
                    <h2 class="font-semibold" style="margin-bottom: 1rem; font-size: 1.5rem;">Your Accounts</h2>
                    <div id="accountCards" class="grid grid-2"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon accent">
                            <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                            </svg>
                        </div>
                        <div class="card-title">
                            <h2>All Accounts</h2>
                            <p><span id="accountCount">0</span> total accounts</p>
                        </div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Account No</th>
                                    <th>Customer ID</th>
                                    <th>Type</th>
                                    <th style="text-align: right;">Balance</th>
                                </tr>
                            </thead>
                            <tbody id="accountsTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        const loadAccounts = () => {
            const accounts = JSON.parse(localStorage.getItem('accounts') || '[]');
            document.getElementById('accountCount').textContent = accounts.length;

            // Account cards
            const cardsHTML = accounts.slice(0, 4).map(account => {
                const icon = account.type === 'Savings' 
                    ? '<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>'
                    : '<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>';
                const colorClass = account.type === 'Savings' ? 'text-blue' : account.type === 'Current' ? 'text-primary' : 'text-purple';

                return `
                    <div class="card account-card">
                        <div class="account-card-header">
                            <div class="account-icon ${colorClass}">${icon}</div>
                            <span class="badge badge-secondary">${account.type}</span>
                        </div>
                        <div class="account-number">
                            <p>Account Number</p>
                            <p>•••• ${account.accountNo.slice(-4)}</p>
                        </div>
                        <div class="account-footer">
                            <div class="balance">
                                <p>Balance</p>
                                <p>${formatCurrency(account.balance)}</p>
                            </div>
                            <div class="customer-id">
                                <p>Customer ID</p>
                                <p>${account.customerId}</p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('accountCards').innerHTML = cardsHTML || '<p class="text-muted">No accounts yet</p>';

            // Table
            const tbody = document.getElementById('accountsTable');
            if (accounts.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" class="empty-state">No accounts yet. Create your first account above.</td></tr>';
                return;
            }

            tbody.innerHTML = accounts.map(account => `
                <tr>
                    <td class="font-mono font-semibold">${account.accountNo}</td>
                    <td class="text-muted">${account.customerId}</td>
                    <td><span class="badge badge-secondary">${account.type}</span></td>
                    <td style="text-align: right; font-weight: 600;">${formatCurrency(account.balance)}</td>
                </tr>
            `).join('');
        };

        document.getElementById('accountForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const accounts = JSON.parse(localStorage.getItem('accounts') || '[]');
            const newAccount = {
                accountNo: `ACC${Date.now().toString().slice(-8)}`,
                customerId: document.getElementById('customerId').value,
                type: document.getElementById('type').value,
                balance: parseFloat(document.getElementById('balance').value)
            };

            accounts.push(newAccount);
            localStorage.setItem('accounts', JSON.stringify(accounts));
            
            addLog('Account Created', `New ${newAccount.type} account ${newAccount.accountNo} for ${newAccount.customerId}`, 'success');
            showToast('Account created successfully!');
            
            e.target.reset();
            loadAccounts();
        });

        document.addEventListener('DOMContentLoaded', loadAccounts);
    </script>
</body>
</html>
